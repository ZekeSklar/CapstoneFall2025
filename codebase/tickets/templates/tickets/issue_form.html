<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Report an Issue - {{ printer.campus_label }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
      :root{
        --bg:#080b12;
        --card:#121722;
        --border:#1d2433;
        --text:#e6ecff;
        --muted:#9aa3b8;
        --primary:#0b5cd6;
        --secondary:#0c7c59;
        --danger-bg:rgba(249,115,115,.12);
        --danger-border:rgba(249,115,115,.45);
      }
      body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;max-width:720px;margin:2rem auto;padding:0 1rem;background:var(--bg);color:var(--text);}
      a{color:var(--primary);}
      .card{background:var(--card);border:1px solid var(--border);border-radius:8px;padding:1.5rem;margin-bottom:1.25rem;box-shadow:0 6px 14px rgba(8,11,18,.35);} 
      h1{margin-top:0;font-weight:600;color:var(--text);}
      .muted{color:var(--muted);font-size:.95rem}
      label{display:block;font-weight:600;margin-top:.9rem}
      input,textarea,select{width:100%;padding:.6rem;border:1px solid #273246;border-radius:6px;font-size:1rem;background:#0f141f;color:var(--text);} 
      input:focus,textarea:focus,select:focus{outline:2px solid rgba(11,92,214,.45);border-color:rgba(11,92,214,.65);} 
      button{margin-top:1rem;padding:.7rem 1.25rem;border:0;border-radius:6px;background:var(--primary);color:#fff;font-weight:600;cursor:pointer;transition:filter .15s ease;} 
      button:hover{filter:brightness(1.05);} 
      .alert{background:var(--danger-bg);border:1px solid var(--danger-border);color:#f97373;padding:.85rem;border-radius:6px;margin-bottom:1rem}
      .field-error{color:#f97373;font-size:.9rem;margin-top:.35rem}
    </style>
  </head>
  <body>
    <div class="card">
      <h1>Report an Issue - {{ printer.campus_label }}</h1>
      <p class="muted">
        {{ printer.make }} {{ printer.model }} | {{ printer.building }} / {{ printer.location_in_building }}
      </p>
    </div>

    <div class="card">
      <form method="post">
        {% csrf_token %}
        {% if form.errors %}
          <div class="alert">Please fix the items highlighted below.</div>
        {% endif %}

        <label for="issue_category">Issue category</label>
        <select name="issue_category" id="issue_category">
          <option value="">-- Select --</option>
          {% for value,label in form.issue_category.field.choices %}
            {% if value %}
              <option value="{{ value }}" {% if form.issue_category.value == value %}selected{% endif %}>{{ label }}</option>
            {% endif %}
          {% endfor %}
        </select>
        {% if form.issue_category.errors %}
          <div class="field-error">{{ form.issue_category.errors|join:', ' }}</div>
        {% endif %}

        <label for="requester_name">Your name (optional)</label>
        <input type="text" name="requester_name" id="requester_name" value="{{ form.requester_name.value|default_if_none:'' }}">
        {% if form.requester_name.errors %}
          <div class="field-error">{{ form.requester_name.errors|join:', ' }}</div>
        {% endif %}

        <label for="requester_email">Your email (optional)</label>
        <input type="email" name="requester_email" id="requester_email" value="{{ form.requester_email.value|default_if_none:'' }}" placeholder="name@berea.edu">
        {% if form.requester_email.errors %}
          <div class="field-error">{{ form.requester_email.errors|join:', ' }}</div>
        {% endif %}

        <label for="details">Describe the problem</label>
        <textarea name="details" id="details" rows="4" placeholder="What happened?">{{ form.details.value|default_if_none:'' }}</textarea>
        {% if form.details.errors %}
          <div class="field-error">{{ form.details.errors|join:', ' }}</div>
        {% endif %}

        <button type="submit">Submit issue</button>
      </form>
    </div>
  </body>
</html>
