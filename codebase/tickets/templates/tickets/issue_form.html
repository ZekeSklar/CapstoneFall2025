<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Report an Issue - {{ printer.campus_label }}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
      :root{
        --admin-bg:#f0f0f0;
        --admin-card:#ffffff;
        --admin-border:#d6d6d6;
        --admin-text:#2a2a2a;
        --admin-muted:#606060;
        --admin-secondary:#417690;
        --admin-error-bg:#fbe9e9;
        --admin-error-border:#c0392b;
      }
      body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;max-width:720px;margin:2rem auto;padding:0 1rem;background:var(--admin-bg);color:var(--admin-text);}
      a{color:var(--admin-secondary);}
      .card{background:var(--admin-card);border:1px solid var(--admin-border);border-radius:8px;padding:1.5rem;margin-bottom:1.25rem;box-shadow:0 2px 3px rgba(65,118,144,.08);} 
      h1{margin-top:0;font-weight:600;color:var(--admin-text);}
      .muted{color:var(--admin-muted);font-size:.95rem}
      label{display:block;font-weight:600;margin-top:.9rem}
      input,textarea,select{width:100%;padding:.6rem;border:1px solid #c7c7d1;border-radius:6px;font-size:1rem;background:#fff;color:var(--admin-text);}
      input:focus,textarea:focus,select:focus{outline:2px solid rgba(65,118,144,.35);border-color:var(--admin-secondary);}
      button{margin-top:1rem;padding:.7rem 1.25rem;border:0;border-radius:6px;background:var(--admin-secondary);color:#fff;font-weight:600;cursor:pointer;transition:.15s ease-in-out;}
      button:hover{filter:brightness(.93);}
      .alert{background:var(--admin-error-bg);border:1px solid var(--admin-error-border);color:#8f2f1f;padding:.85rem;border-radius:6px;margin-bottom:1rem}
      .field-error{color:#a1261c;font-size:.9rem;margin-top:.35rem}
    </style>
  </head>
  <body>
    <div class="card">
      <h1>Report an Issue - {{ printer.campus_label }}</h1>
      <p class="muted">
        {{ printer.make }} {{ printer.model }} | {{ printer.building }} / {{ printer.location_in_building }}
      </p>
    </div>

    <div class="card">
      <form method="post">
        {% csrf_token %}
        {% if form.errors %}
          <div class="alert">Please fix the items highlighted below.</div>
        {% endif %}

        <label for="issue_category">Issue category</label>
        <select name="issue_category" id="issue_category">
          <option value="">-- Select --</option>
          {% for value,label in form.issue_category.field.choices %}
            {% if value %}
              <option value="{{ value }}" {% if form.issue_category.value == value %}selected{% endif %}>{{ label }}</option>
            {% endif %}
          {% endfor %}
        </select>
        {% if form.issue_category.errors %}
          <div class="field-error">{{ form.issue_category.errors|join:', ' }}</div>
        {% endif %}

        <label for="requester_name">Your name (optional)</label>
        <input type="text" name="requester_name" id="requester_name" value="{{ form.requester_name.value|default_if_none:'' }}">
        {% if form.requester_name.errors %}
          <div class="field-error">{{ form.requester_name.errors|join:', ' }}</div>
        {% endif %}

        <label for="requester_email">Your email (optional)</label>
        <input type="email" name="requester_email" id="requester_email" value="{{ form.requester_email.value|default_if_none:'' }}" placeholder="name@berea.edu">
        {% if form.requester_email.errors %}
          <div class="field-error">{{ form.requester_email.errors|join:', ' }}</div>
        {% endif %}

        <label for="details">Describe the problem</label>
        <textarea name="details" id="details" rows="4" placeholder="What happened?">{{ form.details.value|default_if_none:'' }}</textarea>
        {% if form.details.errors %}
          <div class="field-error">{{ form.details.errors|join:', ' }}</div>
        {% endif %}

        <button type="submit">Submit issue</button>
      </form>
    </div>
  </body>
</html>
